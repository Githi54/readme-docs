---
import { getEntry } from 'astro:content';
import DocsLayout from '../layouts/DocsLayout.astro';
import { renderMarkdown } from '../lib/markdown';

// Fetch the singleton entry 'index' created by our loader
const entry = await getEntry('docs', 'index');

if (!entry) {
  throw new Error('Could not find docs entry. Please check configuration.');
}

const { html, headings } = await renderMarkdown(entry.data.readmeContent);
---

<DocsLayout title={entry.data.title} headings={headings}>
  <div class="mb-8">
    <h1 class="text-4xl font-bold tracking-tight text-gray-900 mb-2">{entry.data.title}</h1>
    {entry.data.description && <p class="text-lg text-gray-600">{entry.data.description}</p>}
    {entry.data.repoUrl && (
       <a href={entry.data.repoUrl} target="_blank" class="text-sm text-blue-600 hover:text-blue-800 underline">
         View on GitHub
       </a>
    )}
  </div>
  <div set:html={html} />
</DocsLayout>
