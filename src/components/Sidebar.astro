---
import type { MarkdownHeading } from 'astro';

interface Props {
  headings: MarkdownHeading[];
}

const { headings } = Astro.props;

// Filter for H2 and H3 only to avoid clutter
const toc = headings.filter((h) => h.depth >= 2 && h.depth <= 3);
---

<nav class="w-64 flex-shrink-0 hidden lg:block h-screen sticky top-0 overflow-y-auto border-r border-gray-200 py-8 px-4 bg-gray-50/50">
  <div class="mb-4 font-semibold text-sm text-gray-900 tracking-wide uppercase">On this page</div>
  <ul class="space-y-2 text-sm">
    {
      toc.length === 0 ? (
        <li class="text-gray-500 italic">No sections found</li>
      ) : (
        toc.map((heading) => (
          <li class:list={[{ 'pl-4': heading.depth === 3 }]}>
            <a
              href={`#${heading.slug}`}
              class="block text-gray-600 hover:text-blue-600 transition-colors truncate"
            >
              {heading.text}
            </a>
          </li>
        ))
      )
    }
  </ul>
</nav>
